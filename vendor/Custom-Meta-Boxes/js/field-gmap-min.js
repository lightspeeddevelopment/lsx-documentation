!function($){var e=function(e){function o(e,o){v.setPosition(e),r.setCenter(e),o&&r.setZoom(o),l.val(e.lat()),s.val(e.lng()),p.getElevationForLocations({locations:[v.getPosition()]},function(e,o){o==google.maps.ElevationStatus.OK&&e[0]&&i.val(e[0].elevation)})}function t(){var e=r.getZoom();$('.map-zoom option[selected="selected"]').attr("selected",""),$('.map-zoom option[value="'+e+'"]').attr("selected",e),$(".zoom").val(e)}var a=$(".map-search",e).get(0),n=$(".map",e).get(0),l=$(".latitude",e),s=$(".longitude",e),i=$(".elevation",e),d=$(".zoom",e),g=$(".address",e),p=new google.maps.ElevationService,m={center:new google.maps.LatLng(CMBGmaps.defaults.latitude,CMBGmaps.defaults.longitude),zoom:parseInt(CMBGmaps.defaults.zoom),scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},r=new google.maps.Map(n,m),c={map:r,draggable:!0,title:CMBGmaps.strings.markerTitle},v=new google.maps.Marker(c);v.setPosition(m.center),l.val()&&s.val()&&(latLng=new google.maps.LatLng(l.val(),s.val()),o(latLng,parseInt(d.val()))),google.maps.event.addListener(v,"dragend",function(){o(v.getPosition())});var u=new google.maps.places.Autocomplete(a);u.bindTo("bounds",r),google.maps.event.addListener(u,"place_changed",function(){var e=u.getPlace();e.geometry.viewport&&r.fitBounds(e.geometry.viewport),o(e.geometry.location),$(".address").val(e.formatted_address),t()}),google.maps.event.addListener(r,"zoom_changed",function(){t()}),$(".map-zoom").on("change",function(){0!=$(this).prop("selectedIndex")&&r.setZoom($(this).prop("selectedIndex"))}),$(a).keypress(function(e){13===e.keyCode&&e.preventDefault()})};CMB.addCallbackForInit(function(){$(".CMB_Gmap_Field .field-item").each(function(){e($(this))})}),CMB.addCallbackForClonedField(["CMB_Gmap_Field"],e)}(jQuery);